# 1. Giới thiệu
## 1.1 Router là gì?
- Router hay còn được gọi là bộ định tuyến có nghiệm vụ kết nối mạng cho phóe các máy tính riêng lẻ có thể kết kết được với nhau. Vai trò của router rất quan trọng, nếu không có router thì các máy tính riêng lẻ không thể giao tiếp với nhau cũng như chia sẻ thông tin cho nhau 
![image](image/Screenshot_48.png)

## 1.2 Cấu tạo của một router
![image](image/Screenshot_49.png)

### Bộ nhớ 
- Bảng mạch chính (main broad): có nghiệm vụ liên kết các linh kiện điện tử của router với nhau để phối hợp hoạt động 
- CPU(Central Processing Unit): điều kiển các tác vụ làm việc của router như tính toán các chương trình định tuyến, tìm đường đi cho các gói tin trong mạng,... chịu trách nhiệm tính toán chính của thiết bị  
- RAM(Random Access Memory): xử lý tất các các yêu cầu cần lưu trữ ngắn hạn cho router. Bao gồm các lệnh của quản trị viên nhưu NAT, ACL. RAM được chia thành 2 phần là bộ nhớ chính và bộ nhớ chia sẻ. Bộ nhớ chính sử dụng các chức năng của router như chạy cấu hình, bảng định tuyến, bảng ARP,... Bộ nhớ chia sẻ  là bộ nhớ đệm cho các tiến trình dang xử lý. Dữ liệu bộ nhớ ram sẽ mất khi bị ngắt nguồn 
- NVRAM(Non Volatile Random Access Memory): dùng để chứa file startup-config và dữ liệu không bị mất khi bị mất nguồn
- ROM(Read-Only Memory): là bộ nhớ lưu trữ dài hạn cho router. Dữ kiệu không bị mất khi bị mất nguồn. Phần mềm bootstrap được lưu trữ trên ROM của router 
- Flash: Lưu file hệ điều hành IOS(Internetwork Operation System) của router
### Interface
- Hay còn gọi là cổng, có nhiều loại cổng trên router: Serial Interface, Ethernet Interface, Fast Ethernet Interface 
### Cổng console/AUX 
- là cổng nối tiếp chủ yếu được sử dụng để cấu hình router
## 1.3 Quá trình khởi động của một router
1. Mở nguồn cho router
2. Bootstrap chạy chương trình POST (power on self test)
3. Bootstrap kiểm tra giá trị thanh ghi cấu hình để gchỉ định nơi tải IOS. Theo mặc định (giá trị mặc định của Thanh ghi cấu hình là 2102), Router sẽ trước tiền tìm kiếm các lệnh "boot system" trong tệp startup-config. Nếu tìm thấy lệnh, nó sẽ chạ các lệnh khởi đọng hệ thóng theo thứ tự chúng xuất hiện trong cấu hình khởi động  để định vị hệ điều hành. Nếu không tệp hệ điều hành sẽ được tải về từ Flash. Nếu không tìm thấy IOS trong Flash. Bootstrap sẽ thử tải hệ điều hành từ máy chủ TDTP hoặc từ ROM (mini-IOS)
4. Sau khi tìm thấy hệ điều hành, hệ điều hành sẽ khởi chạy 
5. Sua đó hệ điều hành sẽ tải tệp cấu hình startup-config từ NVRAM vào RAM. Nếu không tìm thấy tệp trong NVRAM thì hệ điều hành sẽ cố gắng tải tệp từ máy chủ TFTP. Nếu máy chủ không phản hồi thì router sẽ vào chế độ thiết lập ban đầu 

# 2. Routing
## 2.1 Routing là gì?
- Định tuyến là phương thức mà router hay PC dùng để chuyển các gói tin đến địa chỉ đích một cách tối ưu nhất. Router thu thập và duy trì các thông tin định tuyến để  cho phép truyền và nhận các dữ liệu. Quá trình Routing dựa vào thông tin trên bảng định tuyến, là bảng chứa lộ trình nhanh và tốt nhất đến các mạng khác nhau trên mạng, để hướng các gói tin truyền đi một cách hiệu quả nhất
- Thông tin trên bảng định tuyến có thể đạt thủ công hoặc có thể sử dụng một giao thức định tuyến động để tạo ra và tự động cập nhập các thông tin định tuyến
![image](image/Screenshot_50.png)
- Để định tuyến route cần biết các thông tin  

  - Địa chỉ của đích  

  - Xác định nguồn mà router có thể học

  - Biết được các đường đi có thể đến đích  

  - Chọn đường đi tốt nhất  

  - Duy trì dữ liệu thông tin định tuyến  

## 2.2 Phương thức định tuyến  
- Static routing và Dynamic routing
![image](image/Screenshot_51.png)
- Routing Protocol: là ngôn ngữ để một Router trao đổi với một router khác để chia sẻ thông tin định tuyến về khả năng được đến mạng đích cũng nhưtrạng thái của mạng. Điều này giúp cho các router đều có bảng định tuyến tương tích với nhau 
- Bảng định tuyến của mỗi giao thức định tuyến là khác nhau, nhưng có thể bao gồm những thông tin sau:

  - Địa chỉ đích của mạng, mạng con hoặc hệ thống.

  - Địa chỉ IP của router chặng kế tiếp phải đến.

  - Giao tiếp vật lí phải sử dụng để đi đến Router kế tiếp.

  - Subnet mask của địa chỉ đích.

  - Khoảng cách đến đích (ví dụ: số lượng chặng để đến đích).

  - Thời gian (tính theo giây) từ khi Router cập nhật lần cuối.
### Static routing
- Bộ định tuyến học các tuyến khi quản trị viên cấu hình tuyến tĩnh theo cách thủ công. Quản trị viên phải cập nhật thủ công mục nhập tuyến tĩnh này bất cứ khi nào thay đổi cấu trúc liên kết internet yêu cầu cập nhật. Các tuyến tĩnh là các tuyến do người dùng xác định để chỉ định giao diện gửi đi trên bộ định tuyến khi các gói sẽ được gửi đến một đích cụ thể. Các tuyến do quản trị viên xác định này cho phép kiểm soát rất chính xác hành vi định tuyến của kết nối mạng IP.
- Đặc điểm
  - Quản trị viên mạng nhập thủ công các tuyến tĩnh vào router.

  - Thay đổi cấu trúc liên kết mạng yêu cầu cập nhật thủ công cho tuyến.

  - Hành vi định tuyến có thể được kiểm soát chính xác.


### Dynamic routing
- Bộ định tuyến tự động học các tuyến sau khi quản trị viên cấu hình giao thức định tuyến để xác định các tuyến đến các mạng từ xa. Không giống như tình huống với các tuyến tĩnh, sau khi quản trị viên mạng kích hoạt định tuyến động, quá trình định tuyến sẽ tự động cập nhật bảng định tuyến bất cứ khi nào thiết bị nhận được thông tin cấu trúc liên kết mới. Bộ định tuyến học và duy trì các tuyến đường đến các điểm đến từ xa bằng cách trao đổi các bản cập nhật định tuyến với các bộ định tuyến khác trong mạng internet.
- Đặc điểm
  - Giao thức định tuyến mạng tự động điều chỉnh các tuyến đường động khi cấu trúc liên kết hoặc lưu lượng thay đổi.

  - Bộ định tuyếnr tìm hiểu và duy trì các tuyến đường đến các điểm đến từ xa bằng cách trao đổi các bản cập nhật định tuyến.
  
  - Bộ định tuyến khám phá các mạng mới hoặc các thay đổi khác trong cấu trúc liên kết bằng cách chia sẻ thông tin bảng định tuyến


# Tham khảo
- https://vnpro.vn/thu-vien/mo-ta-cau-tao-qua-trinh-khoi-dong-va-cac-che-do-cau-hinh-cua-router-4327.html
- https://vnpro.vn/thu-vien/the-nao-la-routing-2042.html
- https://vnpro.vn/thu-vien/so-sanh-dinh-tuyen-tinh-va-dong-4062.html